# Strategic merge patch for OpenClaw Deployment (vanilla Kubernetes)
# - Removes oauth-proxy sidecar container
# - Removes oauth-config and proxy-tls volumes
# - Changes serviceAccountName to default
# - Changes init container image from ubi9-minimal to busybox
apiVersion: apps/v1
kind: Deployment
metadata:
  name: openclaw
  namespace: openclaw
spec:
  template:
    spec:
      serviceAccountName: default
      securityContext:
        fsGroup: 1000
      initContainers:
      - name: init-config
        image: busybox:latest
        securityContext:
          runAsUser: 1000
          runAsGroup: 1000
      containers:
      - name: oauth-proxy
        $patch: delete
      volumes:
      - name: oauth-config
        $patch: delete
      - name: proxy-tls
        $patch: delete
